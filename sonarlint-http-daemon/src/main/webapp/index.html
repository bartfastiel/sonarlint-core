<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sonar at your fingertips</title>
 <script>
	function analyze() {
		document.getElementById("resultTitle").style.display = "block";
		   document.getElementById("result").innerHTML = "sending request...";
		var url = "http://localhost:8080/analyze?language="+document.getElementById("language").value;
		var method = "POST";
		var async = true;
		var request = new XMLHttpRequest();
		request.onload = function () {
		   document.getElementById("result").innerHTML = request.responseText;
		}
		request.open(method, url, async);
		request.setRequestHeader("Content-Type", "plain/text;charset=UTF-8");
		request.send(document.getElementById("input").value);
		document.getElementById("result").innerHTML = "request sent, waiting for response...";
	}
</script>
</head>

<body style="margin: 0; font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif">
    <h1 style="position: fixed; top:0; left: 0; right: 0;	height: 25px; background-color: #262626; margin: 0; font-size: 16px; padding: 5px 0 0 10px;font-weight:normal; color:white">
      <em style="font-weight: bold;font-style:normal">sonar</em>instant
    </h1>
  <h2 style="margin-top:30px">Paste your code here:</h2>
  <textarea id="input" rows="4" cols="50">arr = [1, 2, 3];
for (var x in arr) {
	console.log(x);
}</textarea><br/>
  Language:
  <select id="language">
    <option value="JavaScript">JavaScript</option>
    <option value="Java">Java</option>
  </select>
  <button onclick="analyze()">Analyse code now!</button>
  <h2 id="resultTitle" style="display:none">Result:</h2>
  <div id="result" style="white-space:pre"></div>
</body>
</html>
